webpackJsonp([0x643e3cbf1f7b],{395:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var o=n(1),c=a(o),d=n(56),i=a(d),s=n(167),f=a(s),p=n(5),m=n(52),h=a(m),b=n(54),v=a(b),y=function(e){function t(){l(this,t);var n=r(this,e.call(this));return n.editBand=function(e){var t=n.state.bands,a=t.find(function(t){return t.id===e});n.setState({selectedId:e,selectedObject:c.default.createElement(f.default,{selectedObject:a,fetchFunction:n.fetchBands})})},n.createBand=function(){n.setState({selectedId:null,selectedObject:c.default.createElement(f.default,{selectedObject:{id:-1},fetchFunction:n.fetchBands})})},n.fetchBands=function(){n.setState({selectedObject:null,selectedId:0}),(0,p.fetchAll)("bands").then(function(e){n.setState({bands:e})})},n.state={bands:[],selectedId:0,selectedObject:null},n}return u(t,e),t.prototype.componentDidMount=function(){this.createBand(),this.fetchBands()},t.prototype.render=function(){var e=this,t=this.state,n=t.bands,a=t.selectedObject,l=t.selectedId;return n?c.default.createElement("div",{className:h.default.center},c.default.createElement("div",{className:h.default.main},c.default.createElement("div",{className:h.default.list},c.default.createElement("div",{className:h.default.selectable,onClick:this.createBand,onKeyDown:function(){},role:"button",tabIndex:0},c.default.createElement("img",{src:v.default,className:h.default.addElement,alt:""}),"Új Zenekar"),n.map(function(t){return c.default.createElement(i.default,{title:t.id+" – "+t.name,start_date:t.updated_at,onClick:function(){return e.editBand(t.id)},selected:t.id===l,key:t.id})})),c.default.createElement("div",{className:h.default.selected},a))):c.default.createElement("div",{className:h.default.center})},t}(c.default.Component);t.default=y,e.exports=t.default},167:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},c=n(1),d=a(c),i=n(3),s=a(i),f=n(5),p=n(13),m=a(p),h=n(19),b=a(h),v=n(21),y=a(v),E={id:-1,name:void 0,url:void 0},O=function(e){function t(){l(this,t);var n=r(this,e.call(this));return n.handleChange=function(e){var t,a=e.target.name;if("null"===e.target.value){var l;return void n.setState((l={},l[a]=null,l))}n.setState((t={},t[a]=e.target.value,t))},n.uploadChanges=function(){var e=n.state.id;e<0?n.addBand():n.updateBand()},n.addBand=function(){var e=n.props.fetchFunction;(0,f.fetchPost)("bands",n.state).then(function(){e()})},n.updateBand=function(){var e=n.props.fetchFunction;(0,f.fetchPut)("bands",n.state).then(function(){e()})},n.state=E,n}return u(t,e),t.prototype.componentDidMount=function(){var e=this.props.selectedObject;this.setState(o({},E,e))},t.prototype.componentWillReceiveProps=function(e){var t=e.selectedObject;this.setState(o({},E,t))},t.prototype.render=function(){var e=this.props,t=e.selected,n=e.title,a=e.fetchFunction,l=this.state,r=l.id,u=l.name,o=l.url,c=r<0;return d.default.createElement("div",{className:m.default.main},d.default.createElement(y.default,{id:r,type:"bands",fetchFunction:a}),d.default.createElement("div",{className:m.default.formgroup,hidden:t!==n},c?"Új Banda adatai:":"Banda adatai:",d.default.createElement(b.default,{selected:t,title:n,handleChange:this.handleChange,value:u,name:"name",example:"Pedrofon",label:"Név"}),d.default.createElement(b.default,{selected:t,title:n,handleChange:this.handleChange,value:o,name:"url",example:"www.example.com",label:"Weboldal"}),d.default.createElement("div",{className:m.default.formgroup},d.default.createElement("button",{onClick:this.uploadChanges,type:"submit",className:m.default.submit},c?"Zenekar hozzáadása":"Zenekar módosítása"))))},t}(d.default.Component);O.propTypes={selectedObject:s.default.instanceOf(Object).isRequired,selected:s.default.string,title:s.default.string,fetchFunction:s.default.func.isRequired},O.defaultProps={selected:"",title:""},t.default=O,e.exports=t.default},441:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var l=n(1),r=a(l),u=n(23),o=a(u),c=n(395),d=a(c),i=n(58),s=a(i),f=n(24),p=a(f),m=n(25);n(44);var h=function(){return(0,m.isLoggedIn)()?r.default.createElement("div",null,r.default.createElement(s.default,{band:!0}),r.default.createElement(o.default,{transitionName:"fade",transitionAppearTimeout:1e3,transitionEnterTimeout:300,transitionAppear:!0,transitionLeaveTimeout:300},r.default.createElement("div",{className:p.default.main},r.default.createElement(d.default,null)))):r.default.createElement("div",{className:p.default.pageCenter},r.default.createElement("div",null,"Nincs Jogosultságod ehhez az oldalhoz. Jelentkezz be!"))};t.default=h,e.exports=t.default}});
//# sourceMappingURL=component---src-pages-edit-band-js-79d1d364e03a9151ddc9.js.map