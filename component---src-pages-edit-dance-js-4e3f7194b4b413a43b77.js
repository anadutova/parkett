webpackJsonp([0x79c1197f6d61],{397:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var u=n(1),r=a(u),i=n(56),o=a(i),s=n(84),f=a(s),p=n(5),m=n(52),h=a(m),y=n(54),_=a(y),v=function(e){function t(){c(this,t);var n=l(this,e.call(this));return n.editDance=function(e){var t=n.state.dances,a=t.find(function(t){return t.id===e});n.setState({selectedId:e,selectedObject:r.default.createElement(f.default,{selectedObject:a,fetchFunction:n.fetchDances})})},n.createDance=function(){n.setState({selectedId:null,selectedObject:r.default.createElement(f.default,{selectedObject:{id:-1},fetchFunction:n.fetchDances})})},n.fetchDances=function(){n.setState({selectedObject:null}),(0,p.fetchAll)("dances").then(function(e){n.setState({dances:e})})},n.state={dances:[],selectedId:0,selectedObject:null},n}return d(t,e),t.prototype.componentDidMount=function(){this.createDance(),this.fetchDances()},t.prototype.render=function(){var e=this,t=this.state,n=t.selectedObject,a=t.dances,c=t.selectedId;return a?r.default.createElement("div",{className:h.default.center},r.default.createElement("div",{className:h.default.main},r.default.createElement("div",{className:h.default.list},r.default.createElement("div",{className:h.default.selectable,onClick:this.createDance,onKeyDown:function(){},role:"button",tabIndex:0},r.default.createElement("img",{src:_.default,className:h.default.addElement,alt:""}),"Új Tánc"),a.map(function(t){return r.default.createElement(o.default,{title:t.id+" –  "+t.name,start_date:t.updated_at,onClick:function(){return e.editDance(t.id)},selected:t.id===c,key:t.id})})),r.default.createElement("div",{className:h.default.selected},n))):r.default.createElement("div",{className:h.default.center})},t}(r.default.Component);t.default=v,e.exports=t.default},84:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(1),i=a(r),o=n(3),s=a(o),f=n(5),p=n(13),m=a(p),h=n(19),y=a(h),_=n(62),v=a(_),b=n(55),E=a(b),g=n(85),O=a(g),j=n(21),w=a(j),N={name:void 0,content:void 0,dance_type_id:void 0},D=function(e){function t(){c(this,t);var n=l(this,e.call(this));return n.addNewElement=function(e){n.setState({addSelected:e})},n.close=function(){n.setState({addSelected:null})},n.handleChange=function(e){var t,a=e.target.name;if("null"===e.target.value){var c;return void n.setState((c={},c[a]=null,c))}n.setState((t={},t[a]=e.target.value,t))},n.uploadChanges=function(){var e=n.state.id;e<0?n.addDance():n.updateDance()},n.addDance=function(){var e=n.state.dance_type_id,t=u({},n.state,{dance_types:[],dance_type_id:parseInt(e,10)});(0,f.fetchPost)("dances",t).then(function(){var e=n.props.fetchFunction;e()})},n.updateDance=function(){var e=n.state.dance_type_id,t=u({},n.state,{dance_types:[],dance_type_id:parseInt(e,10)});(0,f.fetchPut)("dances",t).then(function(){var e=n.props.fetchFunction;e()})},n.fetchDanceTypes=function(){(0,f.fetchAll)("dance_types").then(function(e){n.setState({dance_types:e})})},n.state={id:-1,addSelected:null,dance_type_id:1,dance_types:[],name:"",content:""},n}return d(t,e),t.prototype.componentDidMount=function(){var e=this.props.selectedObject;this.setState(u({},N,e)),this.fetchDanceTypes()},t.prototype.componentWillReceiveProps=function(e){var t=e.selectedObject;this.setState(u({},N,{dance_type_id:t.dance_type?parseInt(t.dance_type.id,10):parseInt(t.dance_type_id,10)},t))},t.prototype.render=function(){var e=this,t=this.props,n=t.selected,a=t.title,c=t.fetchFunction,l=this.state,d=l.id,u=l.name,r=l.content,o=l.dance_type_id,s=l.dance_types,f=l.addSelected;if(!s)return i.default.createElement("div",{className:m.default.main});var p=d<0;return i.default.createElement("div",{className:m.default.main},i.default.createElement(w.default,{id:d,type:"dances",fetchFunction:c}),i.default.createElement("div",{className:m.default.formgroup,hidden:n!==a},p?"Új Tánc adatai:":"Tánc adatai:",i.default.createElement(y.default,{selectedForm:n,form:a,handleChange:this.handleChange,value:u,name:"name",example:"salsa",label:"Név"}),i.default.createElement(E.default,{selectedForm:n,form:a,handleChange:this.handleChange,value:r,name:"content",example:"Ez a tánc a legeslegjobb",label:"Leírás"}),i.default.createElement(v.default,{selected:n,title:a,handleChange:this.handleChange,value:o,name:"dance_type_id",label:"Tánc típus",options:s.map(function(e){return i.default.createElement("option",{value:e.id,key:e.id},e.id+" – "+e.name)}),addNew:function(){return e.addNewElement("dance_type_id")},close:function(){return e.close()}}),i.default.createElement(O.default,{selected:f,title:"dance_type_id",selectedObject:{id:-1},fetchFunction:this.fetchDanceTypes}),i.default.createElement("div",{className:m.default.formgroup},i.default.createElement("button",{onClick:this.uploadChanges,type:"submit",className:m.default.submit},p?"Tánc hozzáadása":"Tánc módosítása"))))},t}(i.default.Component);D.propTypes={selectedObject:s.default.instanceOf(Object).isRequired,selected:s.default.string,title:s.default.string,fetchFunction:s.default.func.isRequired},D.defaultProps={selected:"",title:""},t.default=D,e.exports=t.default},444:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var c=n(1),l=a(c),d=n(23),u=a(d),r=n(397),i=a(r),o=n(58),s=a(o),f=n(24),p=a(f),m=n(25);n(44);var h=function(){return(0,m.isEditor)()?l.default.createElement("div",null,l.default.createElement(s.default,{dance:!0}),l.default.createElement(u.default,{transitionName:"fade",transitionAppearTimeout:1e3,transitionEnterTimeout:300,transitionAppear:!0,transitionLeaveTimeout:300},l.default.createElement("div",{className:p.default.main},l.default.createElement(i.default,null)))):l.default.createElement("div",{className:p.default.pageCenter},l.default.createElement("div",null,"Nincs Jogosultságod ehhez az oldalhoz. Jelentkezz be!"))};t.default=h,e.exports=t.default}});
//# sourceMappingURL=component---src-pages-edit-dance-js-4e3f7194b4b413a43b77.js.map