webpackJsonp([0x8095c495917e],{401:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=a(1),c=n(i),u=a(56),s=n(u),d=a(104),f=n(d),m=a(5),p=a(54),h=n(p),b=a(52),v=n(b),g=function(e,t){return e.name.localeCompare(t.name)},E=function(e,t){var a=10;switch(e.position){case"öregtag":a=0;break;case"újonc":a=1;break;case"tag":a=2;break;default:a=10}var n=10;switch(t.position){case"öregtag":n=0;break;case"újonc":n=1;break;case"tag":n=2;break;default:n=10}return a<n?1:a>n?-1:0},y=function(e){function t(){l(this,t);var a=r(this,e.call(this));return a.editDJ=function(e){var t=a.state.members,n=t.find(function(t){return t.id===e});a.setState({selectedId:e,selectedObject:c.default.createElement(f.default,{selectedObject:n,fetchFunction:a.fetchMembers})})},a.createMember=function(){a.setState({selectedId:null,selectedObject:c.default.createElement(f.default,{selectedObject:{id:-1},fetchFunction:a.fetchMembers})})},a.fetchMembers=function(){a.setState({selectedObject:null}),(0,m.fetchAll)("members").then(function(e){a.setState({members:e})})},a.state={members:[],selectedId:0,selectedObject:null},a}return o(t,e),t.prototype.componentDidMount=function(){this.createMember(),this.fetchMembers()},t.prototype.render=function(){var e=this,t=this.state,a=t.members,n=t.selectedId,l=t.selectedObject;return a?(a.sort(g).sort(E),c.default.createElement("div",{className:v.default.center},c.default.createElement("div",{className:v.default.main},c.default.createElement("div",{className:v.default.list},c.default.createElement("div",{className:v.default.selectable,onClick:this.createMember,onKeyDown:function(){},role:"button",tabIndex:0},c.default.createElement("img",{src:h.default,className:v.default.addElement,alt:""}),"Új Tag"),a.map(function(t){return c.default.createElement(s.default,{title:t.name,onClick:function(){return e.editDJ(t.id)},selected:t.id===n,key:t.id})})),c.default.createElement("div",{className:v.default.selected},l)))):c.default.createElement("div",{className:v.default.center})},t}(c.default.Component);t.default=y,e.exports=t.default},104:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},c=a(1),u=n(c),s=a(3),d=n(s),f=a(5),m=a(13),p=n(m),h=a(19),b=n(h),v=a(55),g=n(v),E=a(87),y=n(E),j=a(21),O=n(j),C={name:void 0,email:void 0,position:void 0,description:void 0},w=function(e){function t(){l(this,t);var a=r(this,e.call(this));return a.handleChange=function(e){var t,n=e.target.name;if("null"===e.target.value){var l;return void a.setState((l={},l[n]=null,l))}a.setState((t={},t[n]=e.target.value,t))},a.uploadChanges=function(){var e=a.state.id;e<0?a.addMember():a.updateMember()},a.addMember=function(){var e=a.state.photo;(0,f.fetchPost)("members",i({},a.state,{image:e})).then(function(){var e=a.props.fetchFunction;e()})},a.updateMember=function(){var e=a.state.photo;(0,f.fetchPut)("members",i({},a.state,{image:e})).then(function(){var e=a.props.fetchFunction;e()})},a.state={id:-1},a}return o(t,e),t.prototype.componentDidMount=function(){var e=this.props.selectedObject;this.setState(i({},C,e,{photo:e.image}))},t.prototype.componentWillReceiveProps=function(e){var t=e.selectedObject;this.setState(i({},C,t,{photo:t.image}))},t.prototype.render=function(){var e=this.props,t=e.selected,a=e.title,n=e.fetchFunction,l=e.deletable,r=this.state,o=r.id,c=r.name,s=r.email,d=r.position,f=r.description,m=o<0;return u.default.createElement("div",{className:p.default.main},l?u.default.createElement(O.default,{id:o,type:"members",fetchFunction:n}):null,u.default.createElement("div",{className:p.default.formgroup,hidden:t!==a},m?"Új Tag adatai:":"Tag adatai:",u.default.createElement(b.default,{selected:t,title:a,handleChange:this.handleChange,value:c,name:"name",example:"DJ Eddy",label:"Név"}),u.default.createElement(b.default,{selected:t,title:a,handleChange:this.handleChange,value:s,name:"email",example:"www.example.com",label:"Email"}),u.default.createElement(b.default,{selected:t,title:a,handleChange:this.handleChange,value:d,name:"position",example:"tag",label:"Pozíció"}),u.default.createElement(g.default,{selected:t,title:a,handleChange:this.handleChange,value:f,name:"description",example:"Csatlakoztam a körhöz",label:"Leírás"}),u.default.createElement(y.default,i({handleChange:this.handleChange},this.state)),u.default.createElement("div",{className:p.default.formgroup},u.default.createElement("button",{onClick:this.uploadChanges,type:"submit",className:p.default.submit},m?"Tag hozzáadása":"Tag módosítása"))))},t}(u.default.Component);w.propTypes={selectedObject:d.default.instanceOf(Object).isRequired,selected:d.default.string,title:d.default.string,fetchFunction:d.default.func.isRequired,deletable:d.default.bool},w.defaultProps={selected:"",title:"",deletable:!0},t.default=w,e.exports=t.default},447:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var l=a(1),r=n(l),o=a(23),i=n(o),c=a(401),u=n(c),s=a(58),d=n(s),f=a(24),m=n(f),p=a(25);a(44);var h=function(){return(0,p.isEditor)()?r.default.createElement("div",null,r.default.createElement(d.default,{member:!0}),r.default.createElement(i.default,{transitionName:"fade",transitionAppearTimeout:1e3,transitionEnterTimeout:300,transitionAppear:!0,transitionLeaveTimeout:300},r.default.createElement("div",{className:m.default.main},r.default.createElement(u.default,null)))):r.default.createElement("div",{className:m.default.pageCenter},r.default.createElement("div",null,"Nincs Jogosultságod ehhez az oldalhoz. Jelentkezz be!"))};t.default=h,e.exports=t.default}});
//# sourceMappingURL=component---src-pages-edit-member-js-381797323861e06b876f.js.map